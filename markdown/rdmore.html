

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Read more &#8212; NNSmith ASPLOS Artifact  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'markdown/rdmore';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Evaluating artifact" href="evaluation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="https://github.com/ganler/nnsmith-logo/raw/master/nnsmith-logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="https://github.com/ganler/nnsmith-logo/raw/master/nnsmith-logo.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="evaluation.html">
                        Evaluating artifact
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Read more
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="evaluation.html">
                        Evaluating artifact
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Read more
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><strong>Read more</strong></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="read-more">
<h1><strong>Read more</strong><a class="headerlink" href="#read-more" title="Permalink to this heading">#</a></h1>
<section id="faq">
<h2>FAQ<a class="headerlink" href="#faq" title="Permalink to this heading">#</a></h2>
<section id="i-cannot-use-docker-after-installation">
<h3>I cannot use docker after installation<a class="headerlink" href="#i-cannot-use-docker-after-installation" title="Permalink to this heading">#</a></h3>
<p>If you are a sudoer, there are a few post-installation <a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">steps</a> on Linux:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>groupadd<span class="w"> </span>docker
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>
newgrp<span class="w"> </span>docker
docker<span class="w"> </span>run<span class="w"> </span>hello-world<span class="w"> </span><span class="c1"># Test a hello-world</span>
</pre></div>
</div>
<p>If you still encounter problems, you are encouraged to concat me for access to the original test-bed or try to start as a non-root according to the <a class="reference external" href="https://github.com/ganler/nnsmith-asplos-artifact/blob/master/Dockerfile">Dockerfile</a>.</p>
</section>
<section id="the-oss-dev-version-of-nnsmith">
<h3>The OSS-dev version of NNSmith<a class="headerlink" href="#the-oss-dev-version-of-nnsmith" title="Permalink to this heading">#</a></h3>
<p>NNSmith has been sharpened towards practical and real-world usage, continously developed on <a class="reference external" href="https://github.com/ise-uiuc/nnsmith">GitHub</a>.
It has better features, stability, usability, and extensibility. For example, TensorFlow fuzzing is supported at this point (Oct 13, 2022) and you can install it via <a class="reference external" href="https://pypi.org/project/nnsmith/">PyPI</a>.
Note that the OSS-dev version might not necessarily reflect the implementation mentioned in the original NNSmith paper<a class="footnote-reference brackets" href="#nsh" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.
You are encouraged to use this artifact to reflect the implementation of our ASPLOS’23 paper.</p>
</section>
</section>
<section id="extra-experiments">
<span id="exp-extra"></span><h2>Extra experiments<a class="headerlink" href="#extra-experiments" title="Permalink to this heading">#</a></h2>
<section id="ex1-nnsmith-base-coverage-section-5-3-ablation-study">
<h3>EX1: NNSmith-base coverage (Section 5.3 ablation study)<a class="headerlink" href="#ex1-nnsmith-base-coverage-section-5-3-ablation-study" title="Permalink to this heading">#</a></h3>
<div class="important admonition">
<p class="admonition-title">EX1: Evaluating NNSmith base (binning disabled) on {tvm, ort}</p>
<ul class="simple">
<li><p><strong>Fuzzer type</strong>: NNSmith base (without binning);</p></li>
<li><p><strong>System under test (SUT)</strong>:</p>
<ul>
<li><p>TVM (LLVM CPU backend);</p></li>
<li><p>ONNXRuntime (CPU backend);</p></li>
</ul>
</li>
<li><p><strong>Experiment time</strong>: 8 hours;</p></li>
<li><p><strong>Outputs</strong> (will be used for visualization soon):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/artifact/nnsmith/nnsmith-tvm-base/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/artifact/nnsmith/nnsmith-ort-base/</span></code></p></li>
</ul>
</li>
</ul>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" open="open">
<summary class="sd-summary-title sd-card-header sd-bg-light sd-bg-text-light">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg></span><strong>Script</strong><div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/artifact<span class="w"> </span><span class="c1"># In the container</span>
bash<span class="w"> </span>eval_nnsmith_base.sh
</pre></div>
</div>
</div>
</details></div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" open="open">
<summary class="sd-summary-title sd-card-header sd-bg-light sd-bg-text-light">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg></span><strong>Generate image results</strong><div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">First generate image data with:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/artifact/
<span class="nb">source</span><span class="w"> </span>env.sh
<span class="nb">cd</span><span class="w"> </span>/artifact/nnsmith
git<span class="w"> </span>checkout<span class="w"> </span>5873a77734e25868912219d853dfc6bc0a210ace<span class="w"> </span><span class="c1"># checkout to the visualization commit</span>
python3<span class="w"> </span>experiments/viz_merged_cov.py<span class="w"> </span>--folders<span class="w"> </span>nnsmith-tvm-base<span class="w"> </span>nnsmith-tvm-binning<span class="w"> </span>--tvm<span class="w"> </span><span class="se">\</span>
<span class="w">                                        </span>--tags<span class="w"> </span><span class="s1">&#39;no binning&#39;</span><span class="w"> </span><span class="s1">&#39;w/ binning&#39;</span><span class="w"> </span>--venn<span class="w"> </span><span class="se">\</span>
<span class="w">                                        </span>--output<span class="w"> </span>tvm-binning
python3<span class="w"> </span>experiments/viz_merged_cov.py<span class="w"> </span>--folders<span class="w"> </span>nnsmith-ort-base<span class="w"> </span>nnsmith-ort-binning<span class="w"> </span>--ort<span class="w"> </span><span class="se">\</span>
<span class="w">                                        </span>--tags<span class="w"> </span><span class="s1">&#39;no binning&#39;</span><span class="w"> </span><span class="s1">&#39;w/ binning&#39;</span><span class="w"> </span>--venn<span class="w"> </span><span class="se">\</span>
<span class="w">                                        </span>--output<span class="w"> </span>ort-binning
git<span class="w"> </span>checkout<span class="w"> </span>620645967a14d6a7b077cedd9c2c03ed74af50d9<span class="w"> </span><span class="c1"># going back</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check the outputs.</span>
$<span class="w"> </span>ls<span class="w"> </span>/artifact/nnsmith/tvm-binning
<span class="c1"># tvm_br_cov_venn.png      tvm_branch_cov-time.png  tvm_opt_branch_cov-iter.png</span>
<span class="c1"># tvm_branch_cov-iter.png  tvm_opt_br_cov_venn.png  tvm_opt_branch_cov-time.png</span>
$<span class="w"> </span>ls<span class="w"> </span>/artifact/nnsmith/ort-binning/
<span class="c1"># ort_br_cov_venn.png      ort_branch_cov-time.png  ort_opt_branch_cov-iter.png</span>
<span class="c1"># ort_branch_cov-iter.png  ort_opt_br_cov_venn.png  ort_opt_branch_cov-time.png</span>
</pre></div>
</div>
<p class="sd-card-text">To get images in your local directory, you need to temporarily leave the current container, there are three ways to do it:</p>
<ol class="arabic simple">
<li><p class="sd-card-text"><strong>TMUX</strong>: <code class="docutils literal notranslate"><span class="pre">ctr</span> <span class="pre">+</span> <span class="pre">b</span></code> then <code class="docutils literal notranslate"><span class="pre">d</span></code>;</p></li>
<li><p class="sd-card-text"><strong>Local (recommended)</strong>: just open a new terminal on the machine which is by default out of the container;</p></li>
<li><p class="sd-card-text"><strong>Local</strong>: type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to exit the container environment (later you can resume the container with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span> <span class="pre">-i</span> <span class="pre">${USER}-nnsmith</span></code>);</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now in the local environment</span>
docker<span class="w"> </span>cp<span class="w"> </span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span>-nnsmith:/artifact/nnsmith/tvm-binning<span class="w"> </span>.<span class="w"> </span><span class="c1"># copy TVM results to local folder `tvm-binning`</span>
docker<span class="w"> </span>cp<span class="w"> </span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span>-nnsmith:/artifact/nnsmith/ort-binning<span class="w"> </span>.<span class="w"> </span><span class="c1"># copy ORT results to local folder `ort-binning`</span>
</pre></div>
</div>
</div>
</details><div class="important admonition">
<p class="admonition-title">Check the results</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-warning sd-bg-text-warning">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-alert" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path></svg></span>Fuzzing randomness<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The sample images below are freshly generated when testing the artifact on the original test-bed (Oct. 14, 2022). They can slightly differ from that in the paper due to fuzzing randomness.</p>
<p class="sd-card-text">The randomness in fuzzing could come from performance divergence in different system and random seeds.
This means detailed reproduced data might not be strictly equivalent to that presented in the paper, but the overall trend should be consistent in the long run (say 4 hours).</p>
</div>
</details><div class="tip admonition">
<p class="admonition-title"><strong>Figure 10: Impact of attribute binning on coverage.</strong></p>
<figure class="align-left" id="f10a">
<a class="reference internal image-reference" href="../_images/ort_br_cov_venn1.png"><img alt="../_images/ort_br_cov_venn1.png" src="../_images/ort_br_cov_venn1.png" style="width: 270.75px; height: 186.75px;" /></a>
<figcaption>
<p><span class="caption-text">Figure 7.(a) <strong>ONNXRuntime</strong> <br />
See <code class="docutils literal notranslate"><span class="pre">./ort-binning/ort_br_cov_venn.png</span></code></span><a class="headerlink" href="#f10a" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-right" id="f10b">
<a class="reference internal image-reference" href="../_images/tvm_br_cov_venn1.png"><img alt="../_images/tvm_br_cov_venn1.png" src="../_images/tvm_br_cov_venn1.png" style="width: 270.75px; height: 186.75px;" /></a>
<figcaption>
<p><span class="caption-text">Figure 7.(b) <strong>TVM</strong> <br />
See <code class="docutils literal notranslate"><span class="pre">./tvm-binning/tvm_br_cov_venn.png</span></code></span><a class="headerlink" href="#f10b" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</div>
</section>
<section id="ex2-gradient-based-value-search-section-5-3-ablation-study">
<h3>EX2: Gradient-based value search (Section 5.3 ablation study)<a class="headerlink" href="#ex2-gradient-based-value-search-section-5-3-ablation-study" title="Permalink to this heading">#</a></h3>
<div class="important admonition">
<p class="admonition-title">EX2: Evaluating gradient-based value search</p>
<ul class="simple">
<li><p><strong>Experiment time</strong>: 1.5 hours;</p></li>
<li><p><strong>Outputs</strong> (will be used for visualization soon):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/artifact/nnsmith/512-model-10-node-exp/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/artifact/nnsmith/512-model-20-node-exp/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/artifact/nnsmith/512-model-30-node-exp/</span></code></p></li>
</ul>
</li>
</ul>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" open="open">
<summary class="sd-summary-title sd-card-header sd-bg-light sd-bg-text-light">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg></span><strong>Script</strong><div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/artifact
<span class="nb">source</span><span class="w"> </span>env.sh
<span class="nb">cd</span><span class="w"> </span>/artifact/nnsmith
mkdir<span class="w"> </span>-p<span class="w"> </span>config

<span class="c1"># Run experiments.</span>
git<span class="w"> </span>checkout<span class="w"> </span>1a3ad5863cf8ee5e1db3fbd046cd854b87bf26c9<span class="w"> </span><span class="c1"># checkout to the gradient commit</span>
bash<span class="w"> </span>experiments/input_search_exp.sh<span class="w"> </span><span class="m">10</span>
bash<span class="w"> </span>experiments/input_search_exp.sh<span class="w"> </span><span class="m">20</span>
bash<span class="w"> </span>experiments/input_search_exp.sh<span class="w"> </span><span class="m">30</span>

<span class="c1"># visualization</span>
git<span class="w"> </span>checkout<span class="w"> </span>5873a77734e25868912219d853dfc6bc0a210ace<span class="w"> </span><span class="c1"># going to the visualization commit</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>gradient
python<span class="w"> </span>experiments/plot_inp_search_merge.py<span class="w"> </span>--output<span class="w"> </span>gradient<span class="w">            </span><span class="se">\</span>
<span class="w">                                            </span>--root<span class="w"> </span><span class="m">512</span>-model-10-node-exp<span class="w"> </span><span class="se">\</span>
<span class="w">                                                   </span><span class="m">512</span>-model-20-node-exp<span class="w"> </span><span class="se">\</span>
<span class="w">                                                   </span><span class="m">512</span>-model-30-node-exp

git<span class="w"> </span>checkout<span class="w"> </span>620645967a14d6a7b077cedd9c2c03ed74af50d9<span class="w"> </span><span class="c1"># going back</span>
</pre></div>
</div>
</div>
</details></div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" open="open">
<summary class="sd-summary-title sd-card-header sd-bg-light sd-bg-text-light">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-code" viewBox="0 0 16 16" aria-hidden="true"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg></span><strong>Get image outputs from docker to local</strong><div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">First you need to temporarily leave the current container, there are three ways to do it:</p>
<ol class="arabic simple">
<li><p class="sd-card-text"><strong>TMUX</strong>: <code class="docutils literal notranslate"><span class="pre">ctr</span> <span class="pre">+</span> <span class="pre">b</span></code> then <code class="docutils literal notranslate"><span class="pre">d</span></code>;</p></li>
<li><p class="sd-card-text"><strong>Local (recommended)</strong>: just open a new terminal on the machine which is by default out of the container;</p></li>
<li><p class="sd-card-text"><strong>Local</strong>: type <code class="docutils literal notranslate"><span class="pre">exit</span></code> to exit the container environment (later you can resume the container with <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span> <span class="pre">-i</span> <span class="pre">${USER}-nnsmith</span></code>);</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now in the local environment</span>
docker<span class="w"> </span>cp<span class="w"> </span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span>-nnsmith:/artifact/nnsmith/gradient<span class="w"> </span>.<span class="w"> </span><span class="c1"># copy gradient results to local folder `gradient`</span>
</pre></div>
</div>
</div>
</details><div class="tip admonition">
<p class="admonition-title"><strong>Figure 11: Effectiveness of gradient-based search</strong></p>
<figure class="align-default" id="f11">
<a class="reference internal image-reference" href="../_images/input-search-merge.png"><img alt="../_images/input-search-merge.png" src="../_images/input-search-merge.png" style="width: 600.0px; height: 270.0px;" /></a>
<figcaption>
<p><span class="caption-text">Figure 11 <br />
See <code class="docutils literal notranslate"><span class="pre">./gradient/input-search-merge.png</span></code></span><a class="headerlink" href="#f11" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</div>
</section>
<section id="generate-lemon-models-from-scratch">
<span id="gen-lemon"></span><h3>Generate LEMON models from scratch<a class="headerlink" href="#generate-lemon-models-from-scratch" title="Permalink to this heading">#</a></h3>
<p>Running LEMON in NNSmith’s setting is very complicated. That’s why running it from scratch is not suggested and we generated those data on the test-bed in advance.</p>
<div class="danger admonition">
<p class="admonition-title">Extra constraints for running LEMON from scratch</p>
<ul class="simple">
<li><p>LEMON’s GitHub repository: <a class="github reference external" href="https://github.com/Jacob-yen/LEMON">Jacob-yen/LEMON</a>;</p></li>
<li><p>LEMON requires <strong>GPUs</strong> and <strong>nvidia-docker2</strong> installed;</p></li>
<li><p>An extra disk space of <strong>256+GB</strong> is encouraged;</p></li>
<li><p>The whole experiment takes <strong>at least 5 hours</strong> (if you succeed in one pass) but in practice it could take more time due to setup complexity;</p></li>
</ul>
</div>
<p>Here is the overview:</p>
<ol class="arabic simple">
<li><p>We evaluated LEMON based on LEMON’s official docker image;</p></li>
<li><p>We tweaked the code to make it work and compare fairly:</p>
<ul class="simple">
<li><p>The code version is in a <a class="reference external" href="https://github.com/ganler/LEMON/tree/a55f608e98d44a58d0fcfc6e0e9280a88bc29aae">fork</a>;</p></li>
<li><p>The main change is to disable LEMON’s testing phase, which is not necessary for the purpose of “model generation”. Note we did this change to make LEMON run faster to make the comparison fair;</p></li>
<li><p>We also changed the configuration file to make it work.</p></li>
</ul>
</li>
</ol>
<div class="important admonition">
<p class="admonition-title"><strong>Step 1: Setup LEMON’s docker image</strong></p>
<p>Please refer to the <a class="reference external" href="https://github.com/ganler/LEMON/tree/a55f608e98d44a58d0fcfc6e0e9280a88bc29aae#environment">environment</a> and <a class="reference external" href="https://github.com/ganler/LEMON/tree/a55f608e98d44a58d0fcfc6e0e9280a88bc29aae#redis-startup">Redis startup</a> sections from the original repository to setup the LEMON environment.</p>
</div>
<div class="important admonition">
<p class="admonition-title"><strong>Step 2: Running LEMON</strong></p>
<p>Don’t follow instructions in the <a class="reference external" href="https://github.com/ganler/LEMON/tree/a55f608e98d44a58d0fcfc6e0e9280a88bc29aae#running-lemon">Running LEMON</a> section. Instead, follow the instructions below:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># In the LEMON docker container</span>
<span class="nb">cd</span><span class="w"> </span>/
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/ganler/LEMON.git<span class="w"> </span>LEMON-nnsmith
<span class="nb">cd</span><span class="w"> </span>/LEMON-nnsmith
<span class="nb">source</span><span class="w"> </span>activate<span class="w"> </span>lemon
python<span class="w"> </span>-u<span class="w"> </span>-m<span class="w"> </span>run.mutation_executor<span class="w"> </span>tzer.conf
</pre></div>
</div>
<p>And wait for about 4 hours.</p>
</div>
<div class="important admonition">
<p class="admonition-title"><strong>Step 3: Coverting LEMON models to ONNX models</strong></p>
<p>Next copy the generated models located in <code class="docutils literal notranslate"><span class="pre">/LEMON-nnsmith/lemon_outputs</span></code> from docker image to local.
Say you can put them in <code class="docutils literal notranslate"><span class="pre">/path/to/lemon_outputs</span></code> on your local machine.</p>
<p>Next can convert the LEMON models (i.e., Keras) to ONNX models in NNSmith’s container:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/artifact/
<span class="nb">source</span><span class="w"> </span>env.sh
<span class="nb">cd</span><span class="w"> </span>/artifact/nnsmith
python3<span class="w"> </span>experiments/lemon_tf2onnx.py<span class="w"> </span>--lemon_output_dir<span class="w"> </span>/path/to/lemon_outputs<span class="w"> </span><span class="se">\</span>
<span class="w">                                     </span>--onnx_dir<span class="w"> </span>/artifact/data/lemon-onnx
</pre></div>
</div>
</div>
<p>Now you can go back to <a class="reference internal" href="evaluation.html#exp-e3"><span class="std std-ref">E3: LEMON3 Coverage</span></a> to continue evaluating LEMON.</p>
</section>
<section id="other-mini-experiments">
<h3>Other mini-experiments?<a class="headerlink" href="#other-mini-experiments" title="Permalink to this heading">#</a></h3>
<p>In this artifact, we elaborated the main experiments (<a class="reference internal" href="evaluation.html"><span class="std std-doc">Evaluating artifact</span></a>) and extra experiments (<a class="reference internal" href="#exp-extra"><span class="std std-ref">Extra experiments</span></a>) in the paper.
There is, honestly, still a few more experiments such as Figure 8 and Figure 9.
They are not included in the artifact due to their minor importance and the cost of time (e.g., Figure 9 requires re-running the coverage experiments again in another setting which could take another day) &amp; computing resources.
Nevertheless, feel free to contact the artifact author over HotCRP if you are interested in these experiments and the artifact author will setup them on demand.</p>
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="nsh" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Liu, Jiawei, et al. “NNSmith: Generating Diverse and Valid Test Cases for Deep Learning Compilers.” Proceedings of the 28th ACM International Conference on Architectural Support for Programming Languages and Operating Systems. 2023.</p>
</aside>
</aside>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="evaluation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><strong>Evaluating artifact</strong></p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#faq">FAQ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-cannot-use-docker-after-installation">I cannot use docker after installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-oss-dev-version-of-nnsmith">The OSS-dev version of NNSmith</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extra-experiments">Extra experiments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ex1-nnsmith-base-coverage-section-5-3-ablation-study">EX1: NNSmith-base coverage (Section 5.3 ablation study)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ex2-gradient-based-value-search-section-5-3-ablation-study">EX2: Gradient-based value search (Section 5.3 ablation study)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-lemon-models-from-scratch">Generate LEMON models from scratch</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-mini-experiments">Other mini-experiments?</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../_sources/markdown/rdmore.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner"></div>
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2022, Jiawei Liu.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>